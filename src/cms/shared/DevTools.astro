---
import { OPTIMIZELY_DEV_MODE } from 'astro:env/client';
import GraphQLPanel from './devtools/GraphQLPanel.astro';
import EnvironmentPanel from './devtools/EnvironmentPanel.astro';
import PerformancePanel from './devtools/PerformancePanel.astro';
import OptimizelyFXPanel from './devtools/OptimizelyFXPanel.astro';
import type { FXDebugInfo } from '../../optimizely/debug';

export interface Props {
    fxDebugInfo?: FXDebugInfo;
}

const { fxDebugInfo } = Astro.props;
---

{OPTIMIZELY_DEV_MODE && (
    <div class="border-t border-base-300 bg-base-300" x-data="{ openSections: {} }">
        <div class="mx-auto max-w-5xl px-4 py-4">
            <div class="text-xs font-mono text-base-content opacity-70 mb-4">
                Developer Tools
            </div>
            
            <OptimizelyFXPanel debugInfo={fxDebugInfo} />
            <GraphQLPanel />
            <EnvironmentPanel />
            <PerformancePanel />
        </div>
    </div>
)}